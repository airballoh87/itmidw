DROP table #t

SELECT CONVERT(Varchar(100),NULL) as PlateRowCol, CONVERT(VARCHAR(100),NULL) as itmiSubjectID, CONVERT(INT,NULL) as subjectID INTO #t

INSERT INTO #t (PlateRowCol, itmiSubjectID)
SELECT 'GS00890-DNA_B06','NB-101-081' UNION ALL
SELECT 'GS00890-DNA_D05','NB-101-083' UNION ALL
SELECT 'GS00890-DNA_G05','NB-101-080' UNION ALL
SELECT 'GS00891-DNA_A01','M-101-008' UNION ALL
SELECT 'GS00891-DNA_B01','F-101-008' UNION ALL
SELECT 'GS00891-DNA_C01','NB-101-008' UNION ALL
SELECT 'GS00891-DNA_D01','M-101-010' UNION ALL
SELECT 'GS00891-DNA_E01','F-101-010' UNION ALL
SELECT 'GS00891-DNA_F01','NB-101-010' UNION ALL
SELECT 'GS00891-DNA_G01','M-101-009' UNION ALL
SELECT 'GS00891-DNA_H01','F-101-009' UNION ALL
SELECT 'GS00891-DNA_A02','NB-101-009' UNION ALL
SELECT 'GS00891-DNA_B02','M-101-011' UNION ALL
SELECT 'GS00891-DNA_C02','F-101-011' UNION ALL
SELECT 'GS00891-DNA_D02','NB-101-011' UNION ALL
SELECT 'GS00891-DNA_E02','M-101-013' UNION ALL
SELECT 'GS00891-DNA_F02','F-101-013' UNION ALL
SELECT 'GS00891-DNA_G02','NB-101-013' UNION ALL
SELECT 'GS00891-DNA_H02','M-101-012' UNION ALL
SELECT 'GS00891-DNA_A03','F-101-012' UNION ALL
SELECT 'GS00891-DNA_B03','NB-101-012' UNION ALL
SELECT 'GS00891-DNA_C03','M-101-014' UNION ALL
SELECT 'GS00891-DNA_D03','F-101-014' UNION ALL
SELECT 'GS00891-DNA_E03','NB-101-014' UNION ALL
SELECT 'GS00891-DNA_F03','M-101-021' UNION ALL
SELECT 'GS00891-DNA_G03','F-101-021' UNION ALL
SELECT 'GS00891-DNA_H04','NB-101-021' UNION ALL
SELECT 'GS00891-DNA_A04','M-101-026' UNION ALL
SELECT 'GS00891-DNA_B04','F-101-026' UNION ALL
SELECT 'GS00891-DNA_C04','NB-101-026' UNION ALL
SELECT 'GS00891-DNA_D04','M-101-027' UNION ALL
SELECT 'GS00891-DNA_E04','F-101-027' UNION ALL
SELECT 'GS00891-DNA_F04','NB-101-027' UNION ALL
SELECT 'GS00891-DNA_G04','M-101-029' UNION ALL
SELECT 'GS00891-DNA_H04','F-101-029' UNION ALL
SELECT 'GS00891-DNA_A05','NB-A-101-029' UNION ALL
SELECT 'GS00891-DNA_B05','NB-B-101-029' UNION ALL
SELECT 'GS00891-DNA_C05','M-101-032' UNION ALL
SELECT 'GS00891-DNA_D05','F-101-032' UNION ALL
SELECT 'GS00891-DNA_E05','NB-101-032' UNION ALL
SELECT 'GS00891-DNA_F05','M-101-035' UNION ALL
SELECT 'GS00891-DNA_G05','F-101-035' UNION ALL
SELECT 'GS00891-DNA_H05','NB-101-035' UNION ALL
SELECT 'GS00891-DNA_A06','M-101-036' UNION ALL
SELECT 'GS00891-DNA_B06','F-101-036' UNION ALL
SELECT 'GS00891-DNA_C06','NB-101-036' UNION ALL
SELECT 'GS00891-DNA_D06','M-101-040' UNION ALL
SELECT 'GS00891-DNA_E06','F-101-040' UNION ALL
SELECT 'GS00891-DNA_F06','NB-101-040' UNION ALL
SELECT 'GS00891-DNA_G06','M-101-041' UNION ALL
SELECT 'GS00891-DNA_H06','F-101-041' UNION ALL
SELECT 'GS00891-DNA_A07','NB-101-041' UNION ALL
SELECT 'GS00891-DNA_B07','M-101-049' UNION ALL
SELECT 'GS00891-DNA_C07','F-101-049' UNION ALL
SELECT 'GS00891-DNA_D07','NB-101-049' UNION ALL
SELECT 'GS00891-DNA_E07','M-101-052' UNION ALL
SELECT 'GS00891-DNA_F07','F-101-052' UNION ALL
SELECT 'GS00891-DNA_G07','NB-101-052' UNION ALL
SELECT 'GS00891-DNA_H07','M-101-056' UNION ALL
SELECT 'GS00891-DNA_A08','F-101-056' UNION ALL
SELECT 'GS00891-DNA_B08','NB-101-056' UNION ALL
SELECT 'GS00891-DNA_C08','M-101-055' UNION ALL
SELECT 'GS00891-DNA_D08','F-101-055' UNION ALL
SELECT 'GS00891-DNA_E08','NB-101-055' UNION ALL
SELECT 'GS00891-DNA_F08','M-101-060' UNION ALL
SELECT 'GS00891-DNA_G08','F-101-060' UNION ALL
SELECT 'GS00891-DNA_H08','NB-101-060' UNION ALL
SELECT 'GS00891-DNA_A09','M-101-065' UNION ALL
SELECT 'GS00891-DNA_B09','F-101-065' UNION ALL
SELECT 'GS00891-DNA_C09','NB-101-065' UNION ALL
SELECT 'GS00891-DNA_D09','M-101-067' UNION ALL
SELECT 'GS00891-DNA_E09','F-101-067' UNION ALL
SELECT 'GS00891-DNA_F09','NB-101-067' UNION ALL
SELECT 'GS00891-DNA_G09','M-101-063' UNION ALL
SELECT 'GS00891-DNA_H09','F-101-063' UNION ALL
SELECT 'GS00891-DNA_A10','NB-101-063' UNION ALL
SELECT 'GS00912-DNA_D04','M-101-060' UNION ALL
SELECT 'GS00914-DNA_A01','F-101-060' UNION ALL
SELECT 'GS00914-DNA_A02','NB-101-060' UNION ALL
SELECT 'GS00914-DNA_A03','M-101-065' UNION ALL
SELECT 'GS00914-DNA_B02','F-101-065' UNION ALL
SELECT 'GS00914-DNA_B03','NB-101-065' UNION ALL
SELECT 'GS00914-DNA_C01','M-101-067' UNION ALL
SELECT 'GS00914-DNA_C02','F-101-067' UNION ALL
SELECT 'GS00914-DNA_D01','NB-101-067' UNION ALL
SELECT 'GS00914-DNA_D02','M-101-063' UNION ALL
SELECT 'GS00914-DNA_E01','F-101-063' UNION ALL
SELECT 'GS00914-DNA_E02','NB-101-063' UNION ALL
SELECT 'GS00914-DNA_F01','NB-101-176' UNION ALL
SELECT 'GS00914-DNA_F02','F-101-192' UNION ALL
SELECT 'GS00914-DNA_F03','NB-101-095' UNION ALL
SELECT 'GS00914-DNA_G01','M-101-178' UNION ALL
SELECT 'GS00914-DNA_G02','NB-101-192' UNION ALL
SELECT 'GS00914-DNA_H01','F-101-178' UNION ALL
SELECT 'GS00914-DNA_H02','M-101-184' UNION ALL
SELECT 'GS01304-DNA_H06','NB-101-373' UNION ALL
SELECT 'GS01723-DNA_E06','NB-A-101-542' UNION ALL
SELECT 'GS01723-DNA_F06','NB-B-101-542' UNION ALL
SELECT 'GS01947-DNA_G03','F-101-531' UNION ALL
SELECT 'GS01951-DNA_A07','NB-A-101-774' UNION ALL
SELECT 'GS01974-DNA_A07','PO-101-026-84' UNION ALL
SELECT 'GS01974-DNA_B07','PO-101-027-84' UNION ALL
SELECT 'GS01974-DNA_C07','PO-101-022-84' UNION ALL
SELECT 'GS01999-DNA_G01','NB-101-779' UNION ALL
SELECT 'GS02412-DNA_A04','PO-101-904-22' UNION ALL
SELECT 'GS02412-DNA_C03','PO-101-928-23' UNION ALL
SELECT 'GS02412-DNA_C07','NB-101-945' UNION ALL
SELECT 'GS02412-DNA_D03','PO-101-928-38' UNION ALL
SELECT 'GS02412-DNA_D06','PO-101-943-22' UNION ALL
SELECT 'GS02412-DNA_D07','M-101-942' UNION ALL
SELECT 'GS02412-DNA_E02','NB-101-941' UNION ALL
SELECT 'GS02412-DNA_E03','PO-101-928-22' UNION ALL
SELECT 'GS02412-DNA_E06','M-101-932' UNION ALL
SELECT 'GS02412-DNA_E07','F-101-942' UNION ALL
SELECT 'GS02412-DNA_F02','PO-101-941-22' UNION ALL
SELECT 'GS02412-DNA_F06','F-101-932' UNION ALL
SELECT 'GS02412-DNA_F07','NB-101-942' UNION ALL
SELECT 'GS02412-DNA_G06','NB-101-932' UNION ALL
SELECT 'GS02412-DNA_G07','PO-101-804-23' UNION ALL
SELECT 'GS02412-DNA_H06','PO-101-932-22' UNION ALL
SELECT 'GS02412-DNA_H07','PO-101-657-22' UNION ALL
SELECT 'GS02428-DNA_A01','M-101-940' UNION ALL
SELECT 'GS02428-DNA_A02','NB-101-946' UNION ALL
SELECT 'GS02428-DNA_A04','PO-101-905-22' UNION ALL
SELECT 'GS02428-DNA_B01','F-101-940' UNION ALL
SELECT 'GS02428-DNA_B02','M-101-948' UNION ALL
SELECT 'GS02428-DNA_C01','NB-101-940' UNION ALL
SELECT 'GS02428-DNA_C02','F-101-948' UNION ALL
SELECT 'GS02428-DNA_D02','NB-101-948' UNION ALL
SELECT 'GS02428-DNA_G01','M-101-946' 


DELETE FROM #t where PlateRowCol IS NULL


UPDATE #t SET itmiSubjectID = 'PO-101-084-026'	WHERE PlateRowCol	 = 'GS01974-DNA_A07'	
UPDATE #t SET itmiSubjectID = 'PO-101-084-027' WHERE PlateRowCol	 = 'GS01974-DNA_B07'	
UPDATE #t SET itmiSubjectID = 'PO-101-084-022' WHERE PlateRowCol	 = 'GS01974-DNA_C07'	
UPDATE #t SET itmiSubjectID = 'PO-101-904-022' WHERE PlateRowCol	 = 'GS02412-DNA_A04'	
UPDATE #t SET itmiSubjectID = 'PO-101-928-023' WHERE PlateRowCol	 = 'GS02412-DNA_C03'	
UPDATE #t SET itmiSubjectID = 'PO-101-928-038' WHERE PlateRowCol	 = 'GS02412-DNA_D03'	
UPDATE #t SET itmiSubjectID = 'PO-101-943-022' WHERE PlateRowCol	 = 'GS02412-DNA_D06'	
UPDATE #t SET itmiSubjectID = 'PO-101-928-022' WHERE PlateRowCol	 = 'GS02412-DNA_E03'	
UPDATE #t SET itmiSubjectID = 'PO-101-941-022' WHERE PlateRowCol	 = 'GS02412-DNA_F02'	
UPDATE #t SET itmiSubjectID = 'PO-101-804-023' WHERE PlateRowCol	 = 'GS02412-DNA_G07'	
UPDATE #t SET itmiSubjectID = 'PO-101-932-022' WHERE PlateRowCol	 = 'GS02412-DNA_H06'	
UPDATE #t SET itmiSubjectID = 'PO-101-657-022' WHERE PlateRowCol	 = 'GS02412-DNA_H07'	
UPDATE #t SET itmiSubjectID = 'PO-101-905-022' WHERE PlateRowCol	 = 'GS02428-DNA_A04'	
UPDATE #t SET itmiSubjectID = 'NB-B-101-373'   WHERE PlateRowCol	 = 'GS01304-DNA_H06'


UPDATE #t set subjectID = sub.subjectID
	FROM #t t
		INNER JOIN itmidw.tblsubject sub
			on sub.sourceSystemIDLabel = t.itmiSubjectID


----UPDATE #t set subjectID = sub.subjectID
----FROM #t t
----		INNER JOIN itmidw.tblsubject sub
----			ON sub.sourceSystemIDLabel = t.itmiSubjectID
----where t.subjectID is null
----	and LEFT(t.itmisubjectID,2) = 'po'


--select *
--FROM #t t
--		LEFT JOIN itmidw.tblsubject sub
--			ON sub.sourceSystemIDLabel = t.itmiSubjectID
--where t.subjectID is null
	

--	--NB-B-101-373
	

--	select *
--	from itmidw.tblSubject sub
--		where sub.sourceSystemIDLabel like '%779%'

--	select *
--	from spoint101.EDC101NEWBORN
--	where[Infants Study ID] like '%779%'

UPDATE [dbo].[manifestCGI] set [subjectID] = t.itmiSubjectID
FROM [dbo].[manifestCGI] m
	INNER JOIN  #t t
		ON  m.plateRowCol = t.PlateRowCol


INSERT INTO [dbo].[manifestCGI]([plateRowCol],[subjectID])
SELECT t.PlateRowCol, t.itmiSubjectID
from #t t
	LEFT JOIN [dbo].[manifestCGI] m
		on m.plateRowCol = t.PlateRowCol
WHERE m.plateRowCol is null


		



